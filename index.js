module.exports=(()=>{"use strict";var e={465:(e,t,s)=>{s.d(t,{default:()=>i});const i=class extends window.casthub.card.action{constructor(){super(),this.sceneItemMap={},this.ws=null}async mounted(){const{id:e}=this.identity;this.ws=await window.casthub.ws(e),await this.refresh(),await super.mounted()}async refresh(){(await this.getScenes()).forEach((e=>{const{sources:t}=e;t.forEach((t=>{const s=`${encodeURI(e.name)}|${encodeURI(t.name)}`;this.sceneItemMap[s]={sceneName:e.name,sourceName:t.name}}))}))}async prepareProps(){let e={};const t=Object.keys(this.sceneItemMap),s=t.length;for(let i=0;i<s;i++)e[t[i]]={text:`${this.sceneItemMap[t[i]].sceneName} - ${this.sceneItemMap[t[i]].sourceName} `,icon:"widgets"};return{sceneItem:{type:"select",required:!0,default:null,label:"Source",help:"Select a source to toggle",options:e},visibility:{type:"select",required:!0,default:"toggle",label:"State",help:"Hide, show or toggle the source visibilty",options:{toggle:{text:"Toggle",icon:"code"},show:{text:"Show",icon:"visibility_on"},hide:{text:"Hide",icon:"visibility_off"}}}}}async run(e){if(null===this.props.sceneItem)return;if(!this.sceneItemMap.hasOwnProperty(this.props.sceneItem))return;const{sceneName:t,sourceName:s}=this.sceneItemMap[`${this.props.sceneItem}`];await this.setSourceVisibility(t,s,this.props.visibility)}async getScenes(){const{scenes:e}=await this.ws.send("GetSceneList");return e}async setSourceVisibility(e,t,s){const i=await this.ws.send("GetSceneItemProperties",{"scene-name":e,item:t});switch(s){case"hide":await this.ws.send("SetSceneItemProperties",{"scene-name":e,item:t,visible:!1});break;case"show":await this.ws.send("SetSceneItemProperties",{"scene-name":e,item:t,visible:!0});break;case"toggle":await this.ws.send("SetSceneItemProperties",{"scene-name":e,item:t,visible:!i.visible})}}}}},t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}return s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s(465)})().default;